{"ast":null,"code":"/**\n * Copyright 2013 Facebook, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @providesModule ReactDOMComponent\n * @typechecks static-only\n */\n\"use strict\";\n\nvar CSSPropertyOperations = require(\"./CSSPropertyOperations\");\n\nvar DOMProperty = require(\"./DOMProperty\");\n\nvar DOMPropertyOperations = require(\"./DOMPropertyOperations\");\n\nvar ReactComponent = require(\"./ReactComponent\");\n\nvar ReactEventEmitter = require(\"./ReactEventEmitter\");\n\nvar ReactMultiChild = require(\"./ReactMultiChild\");\n\nvar ReactMount = require(\"./ReactMount\");\n\nvar ReactPerf = require(\"./ReactPerf\");\n\nvar escapeTextForBrowser = require(\"./escapeTextForBrowser\");\n\nvar invariant = require(\"./invariant\");\n\nvar keyOf = require(\"./keyOf\");\n\nvar merge = require(\"./merge\");\n\nvar mixInto = require(\"./mixInto\");\n\nvar putListener = ReactEventEmitter.putListener;\nvar deleteListener = ReactEventEmitter.deleteListener;\nvar registrationNames = ReactEventEmitter.registrationNames; // For quickly matching children type, to test if can be treated as content.\n\nvar CONTENT_TYPES = {\n  'string': true,\n  'number': true\n};\nvar STYLE = keyOf({\n  style: null\n});\n/**\n * @param {?object} props\n */\n\nfunction assertValidProps(props) {\n  if (!props) {\n    return;\n  } // Note the use of `==` which checks for null or undefined.\n\n\n  \"production\" !== process.env.NODE_ENV ? invariant(props.children == null || props.dangerouslySetInnerHTML == null, 'Can only set one of `children` or `props.dangerouslySetInnerHTML`.') : invariant(props.children == null || props.dangerouslySetInnerHTML == null);\n  \"production\" !== process.env.NODE_ENV ? invariant(props.style == null || typeof props.style === 'object', 'The `style` prop expects a mapping from style properties to values, ' + 'not a string.') : invariant(props.style == null || typeof props.style === 'object');\n}\n/**\n * @constructor ReactDOMComponent\n * @extends ReactComponent\n * @extends ReactMultiChild\n */\n\n\nfunction ReactDOMComponent(tag, omitClose) {\n  this._tagOpen = '<' + tag;\n  this._tagClose = omitClose ? '' : '</' + tag + '>';\n  this.tagName = tag.toUpperCase();\n}\n\nReactDOMComponent.Mixin = {\n  /**\n   * Generates root tag markup then recurses. This method has side effects and\n   * is not idempotent.\n   *\n   * @internal\n   * @param {string} rootID The root DOM ID for this node.\n   * @param {ReactReconcileTransaction} transaction\n   * @param {number} mountDepth number of components in the owner hierarchy\n   * @return {string} The computed markup.\n   */\n  mountComponent: ReactPerf.measure('ReactDOMComponent', 'mountComponent', function (rootID, transaction, mountDepth) {\n    ReactComponent.Mixin.mountComponent.call(this, rootID, transaction, mountDepth);\n    assertValidProps(this.props);\n    return this._createOpenTagMarkup() + this._createContentMarkup(transaction) + this._tagClose;\n  }),\n\n  /**\n   * Creates markup for the open tag and all attributes.\n   *\n   * This method has side effects because events get registered.\n   *\n   * Iterating over object properties is faster than iterating over arrays.\n   * @see http://jsperf.com/obj-vs-arr-iteration\n   *\n   * @private\n   * @return {string} Markup of opening tag.\n   */\n  _createOpenTagMarkup: function () {\n    var props = this.props;\n    var ret = this._tagOpen;\n\n    for (var propKey in props) {\n      if (!props.hasOwnProperty(propKey)) {\n        continue;\n      }\n\n      var propValue = props[propKey];\n\n      if (propValue == null) {\n        continue;\n      }\n\n      if (registrationNames[propKey]) {\n        putListener(this._rootNodeID, propKey, propValue);\n      } else {\n        if (propKey === STYLE) {\n          if (propValue) {\n            propValue = props.style = merge(props.style);\n          }\n\n          propValue = CSSPropertyOperations.createMarkupForStyles(propValue);\n        }\n\n        var markup = DOMPropertyOperations.createMarkupForProperty(propKey, propValue);\n\n        if (markup) {\n          ret += ' ' + markup;\n        }\n      }\n    }\n\n    var escapedID = escapeTextForBrowser(this._rootNodeID);\n    return ret + ' ' + ReactMount.ATTR_NAME + '=\"' + escapedID + '\">';\n  },\n\n  /**\n   * Creates markup for the content between the tags.\n   *\n   * @private\n   * @param {ReactReconcileTransaction} transaction\n   * @return {string} Content markup.\n   */\n  _createContentMarkup: function (transaction) {\n    // Intentional use of != to avoid catching zero/false.\n    var innerHTML = this.props.dangerouslySetInnerHTML;\n\n    if (innerHTML != null) {\n      if (innerHTML.__html != null) {\n        return innerHTML.__html;\n      }\n    } else {\n      var contentToUse = CONTENT_TYPES[typeof this.props.children] ? this.props.children : null;\n      var childrenToUse = contentToUse != null ? null : this.props.children;\n\n      if (contentToUse != null) {\n        return escapeTextForBrowser(contentToUse);\n      } else if (childrenToUse != null) {\n        var mountImages = this.mountChildren(childrenToUse, transaction);\n        return mountImages.join('');\n      }\n    }\n\n    return '';\n  },\n  receiveComponent: function (nextComponent, transaction) {\n    assertValidProps(nextComponent.props);\n    ReactComponent.Mixin.receiveComponent.call(this, nextComponent, transaction);\n  },\n\n  /**\n   * Updates a native DOM component after it has already been allocated and\n   * attached to the DOM. Reconciles the root DOM node, then recurses.\n   *\n   * @param {ReactReconcileTransaction} transaction\n   * @param {object} prevProps\n   * @internal\n   * @overridable\n   */\n  updateComponent: ReactPerf.measure('ReactDOMComponent', 'updateComponent', function (transaction, prevProps) {\n    ReactComponent.Mixin.updateComponent.call(this, transaction, prevProps);\n\n    this._updateDOMProperties(prevProps);\n\n    this._updateDOMChildren(prevProps, transaction);\n  }),\n\n  /**\n   * Reconciles the properties by detecting differences in property values and\n   * updating the DOM as necessary. This function is probably the single most\n   * critical path for performance optimization.\n   *\n   * TODO: Benchmark whether checking for changed values in memory actually\n   *       improves performance (especially statically positioned elements).\n   * TODO: Benchmark the effects of putting this at the top since 99% of props\n   *       do not change for a given reconciliation.\n   * TODO: Benchmark areas that can be improved with caching.\n   *\n   * @private\n   * @param {object} lastProps\n   */\n  _updateDOMProperties: function (lastProps) {\n    var nextProps = this.props;\n    var propKey;\n    var styleName;\n    var styleUpdates;\n\n    for (propKey in lastProps) {\n      if (nextProps.hasOwnProperty(propKey) || !lastProps.hasOwnProperty(propKey)) {\n        continue;\n      }\n\n      if (propKey === STYLE) {\n        var lastStyle = lastProps[propKey];\n\n        for (styleName in lastStyle) {\n          if (lastStyle.hasOwnProperty(styleName)) {\n            styleUpdates = styleUpdates || {};\n            styleUpdates[styleName] = '';\n          }\n        }\n      } else if (registrationNames[propKey]) {\n        deleteListener(this._rootNodeID, propKey);\n      } else if (DOMProperty.isStandardName[propKey] || DOMProperty.isCustomAttribute(propKey)) {\n        ReactComponent.DOMIDOperations.deletePropertyByID(this._rootNodeID, propKey);\n      }\n    }\n\n    for (propKey in nextProps) {\n      var nextProp = nextProps[propKey];\n      var lastProp = lastProps[propKey];\n\n      if (!nextProps.hasOwnProperty(propKey) || nextProp === lastProp) {\n        continue;\n      }\n\n      if (propKey === STYLE) {\n        if (nextProp) {\n          nextProp = nextProps.style = merge(nextProp);\n        }\n\n        if (lastProp) {\n          // Unset styles on `lastProp` but not on `nextProp`.\n          for (styleName in lastProp) {\n            if (lastProp.hasOwnProperty(styleName) && !nextProp.hasOwnProperty(styleName)) {\n              styleUpdates = styleUpdates || {};\n              styleUpdates[styleName] = '';\n            }\n          } // Update styles that changed since `lastProp`.\n\n\n          for (styleName in nextProp) {\n            if (nextProp.hasOwnProperty(styleName) && lastProp[styleName] !== nextProp[styleName]) {\n              styleUpdates = styleUpdates || {};\n              styleUpdates[styleName] = nextProp[styleName];\n            }\n          }\n        } else {\n          // Relies on `updateStylesByID` not mutating `styleUpdates`.\n          styleUpdates = nextProp;\n        }\n      } else if (registrationNames[propKey]) {\n        putListener(this._rootNodeID, propKey, nextProp);\n      } else if (DOMProperty.isStandardName[propKey] || DOMProperty.isCustomAttribute(propKey)) {\n        ReactComponent.DOMIDOperations.updatePropertyByID(this._rootNodeID, propKey, nextProp);\n      }\n    }\n\n    if (styleUpdates) {\n      ReactComponent.DOMIDOperations.updateStylesByID(this._rootNodeID, styleUpdates);\n    }\n  },\n\n  /**\n   * Reconciles the children with the various properties that affect the\n   * children content.\n   *\n   * @param {object} lastProps\n   * @param {ReactReconcileTransaction} transaction\n   */\n  _updateDOMChildren: function (lastProps, transaction) {\n    var nextProps = this.props;\n    var lastContent = CONTENT_TYPES[typeof lastProps.children] ? lastProps.children : null;\n    var nextContent = CONTENT_TYPES[typeof nextProps.children] ? nextProps.children : null;\n    var lastHtml = lastProps.dangerouslySetInnerHTML && lastProps.dangerouslySetInnerHTML.__html;\n    var nextHtml = nextProps.dangerouslySetInnerHTML && nextProps.dangerouslySetInnerHTML.__html; // Note the use of `!=` which checks for null or undefined.\n\n    var lastChildren = lastContent != null ? null : lastProps.children;\n    var nextChildren = nextContent != null ? null : nextProps.children; // If we're switching from children to content/html or vice versa, remove\n    // the old content\n\n    var lastHasContentOrHtml = lastContent != null || lastHtml != null;\n    var nextHasContentOrHtml = nextContent != null || nextHtml != null;\n\n    if (lastChildren != null && nextChildren == null) {\n      this.updateChildren(null, transaction);\n    } else if (lastHasContentOrHtml && !nextHasContentOrHtml) {\n      this.updateTextContent('');\n    }\n\n    if (nextContent != null) {\n      if (lastContent !== nextContent) {\n        this.updateTextContent('' + nextContent);\n      }\n    } else if (nextHtml != null) {\n      if (lastHtml !== nextHtml) {\n        ReactComponent.DOMIDOperations.updateInnerHTMLByID(this._rootNodeID, nextHtml);\n      }\n    } else if (nextChildren != null) {\n      this.updateChildren(nextChildren, transaction);\n    }\n  },\n\n  /**\n   * Destroys all event registrations for this instance. Does not remove from\n   * the DOM. That must be done by the parent.\n   *\n   * @internal\n   */\n  unmountComponent: function () {\n    ReactEventEmitter.deleteAllListeners(this._rootNodeID);\n    ReactComponent.Mixin.unmountComponent.call(this);\n    this.unmountChildren();\n  }\n};\nmixInto(ReactDOMComponent, ReactComponent.Mixin);\nmixInto(ReactDOMComponent, ReactDOMComponent.Mixin);\nmixInto(ReactDOMComponent, ReactMultiChild.Mixin);\nmodule.exports = ReactDOMComponent;","map":{"version":3,"sources":["C:/Users/17735/Documents/itmd511/example-create-react-app-express/node_modules/react/lib/ReactDOMComponent.js"],"names":["CSSPropertyOperations","require","DOMProperty","DOMPropertyOperations","ReactComponent","ReactEventEmitter","ReactMultiChild","ReactMount","ReactPerf","escapeTextForBrowser","invariant","keyOf","merge","mixInto","putListener","deleteListener","registrationNames","CONTENT_TYPES","STYLE","style","assertValidProps","props","process","env","NODE_ENV","children","dangerouslySetInnerHTML","ReactDOMComponent","tag","omitClose","_tagOpen","_tagClose","tagName","toUpperCase","Mixin","mountComponent","measure","rootID","transaction","mountDepth","call","_createOpenTagMarkup","_createContentMarkup","ret","propKey","hasOwnProperty","propValue","_rootNodeID","createMarkupForStyles","markup","createMarkupForProperty","escapedID","ATTR_NAME","innerHTML","__html","contentToUse","childrenToUse","mountImages","mountChildren","join","receiveComponent","nextComponent","updateComponent","prevProps","_updateDOMProperties","_updateDOMChildren","lastProps","nextProps","styleName","styleUpdates","lastStyle","isStandardName","isCustomAttribute","DOMIDOperations","deletePropertyByID","nextProp","lastProp","updatePropertyByID","updateStylesByID","lastContent","nextContent","lastHtml","nextHtml","lastChildren","nextChildren","lastHasContentOrHtml","nextHasContentOrHtml","updateChildren","updateTextContent","updateInnerHTMLByID","unmountComponent","deleteAllListeners","unmountChildren","module","exports"],"mappings":"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","sourcesContent":["/**\n * Copyright 2013 Facebook, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @providesModule ReactDOMComponent\n * @typechecks static-only\n */\n\n\"use strict\";\n\nvar CSSPropertyOperations = require(\"./CSSPropertyOperations\");\nvar DOMProperty = require(\"./DOMProperty\");\nvar DOMPropertyOperations = require(\"./DOMPropertyOperations\");\nvar ReactComponent = require(\"./ReactComponent\");\nvar ReactEventEmitter = require(\"./ReactEventEmitter\");\nvar ReactMultiChild = require(\"./ReactMultiChild\");\nvar ReactMount = require(\"./ReactMount\");\nvar ReactPerf = require(\"./ReactPerf\");\n\nvar escapeTextForBrowser = require(\"./escapeTextForBrowser\");\nvar invariant = require(\"./invariant\");\nvar keyOf = require(\"./keyOf\");\nvar merge = require(\"./merge\");\nvar mixInto = require(\"./mixInto\");\n\nvar putListener = ReactEventEmitter.putListener;\nvar deleteListener = ReactEventEmitter.deleteListener;\nvar registrationNames = ReactEventEmitter.registrationNames;\n\n// For quickly matching children type, to test if can be treated as content.\nvar CONTENT_TYPES = {'string': true, 'number': true};\n\nvar STYLE = keyOf({style: null});\n\n/**\n * @param {?object} props\n */\nfunction assertValidProps(props) {\n  if (!props) {\n    return;\n  }\n  // Note the use of `==` which checks for null or undefined.\n  (\"production\" !== process.env.NODE_ENV ? invariant(\n    props.children == null || props.dangerouslySetInnerHTML == null,\n    'Can only set one of `children` or `props.dangerouslySetInnerHTML`.'\n  ) : invariant(props.children == null || props.dangerouslySetInnerHTML == null));\n  (\"production\" !== process.env.NODE_ENV ? invariant(\n    props.style == null || typeof props.style === 'object',\n    'The `style` prop expects a mapping from style properties to values, ' +\n    'not a string.'\n  ) : invariant(props.style == null || typeof props.style === 'object'));\n}\n\n/**\n * @constructor ReactDOMComponent\n * @extends ReactComponent\n * @extends ReactMultiChild\n */\nfunction ReactDOMComponent(tag, omitClose) {\n  this._tagOpen = '<' + tag;\n  this._tagClose = omitClose ? '' : '</' + tag + '>';\n  this.tagName = tag.toUpperCase();\n}\n\nReactDOMComponent.Mixin = {\n\n  /**\n   * Generates root tag markup then recurses. This method has side effects and\n   * is not idempotent.\n   *\n   * @internal\n   * @param {string} rootID The root DOM ID for this node.\n   * @param {ReactReconcileTransaction} transaction\n   * @param {number} mountDepth number of components in the owner hierarchy\n   * @return {string} The computed markup.\n   */\n  mountComponent: ReactPerf.measure(\n    'ReactDOMComponent',\n    'mountComponent',\n    function(rootID, transaction, mountDepth) {\n      ReactComponent.Mixin.mountComponent.call(\n        this,\n        rootID,\n        transaction,\n        mountDepth\n      );\n      assertValidProps(this.props);\n      return (\n        this._createOpenTagMarkup() +\n        this._createContentMarkup(transaction) +\n        this._tagClose\n      );\n    }\n  ),\n\n  /**\n   * Creates markup for the open tag and all attributes.\n   *\n   * This method has side effects because events get registered.\n   *\n   * Iterating over object properties is faster than iterating over arrays.\n   * @see http://jsperf.com/obj-vs-arr-iteration\n   *\n   * @private\n   * @return {string} Markup of opening tag.\n   */\n  _createOpenTagMarkup: function() {\n    var props = this.props;\n    var ret = this._tagOpen;\n\n    for (var propKey in props) {\n      if (!props.hasOwnProperty(propKey)) {\n        continue;\n      }\n      var propValue = props[propKey];\n      if (propValue == null) {\n        continue;\n      }\n      if (registrationNames[propKey]) {\n        putListener(this._rootNodeID, propKey, propValue);\n      } else {\n        if (propKey === STYLE) {\n          if (propValue) {\n            propValue = props.style = merge(props.style);\n          }\n          propValue = CSSPropertyOperations.createMarkupForStyles(propValue);\n        }\n        var markup =\n          DOMPropertyOperations.createMarkupForProperty(propKey, propValue);\n        if (markup) {\n          ret += ' ' + markup;\n        }\n      }\n    }\n\n    var escapedID = escapeTextForBrowser(this._rootNodeID);\n    return ret + ' ' + ReactMount.ATTR_NAME + '=\"' + escapedID + '\">';\n  },\n\n  /**\n   * Creates markup for the content between the tags.\n   *\n   * @private\n   * @param {ReactReconcileTransaction} transaction\n   * @return {string} Content markup.\n   */\n  _createContentMarkup: function(transaction) {\n    // Intentional use of != to avoid catching zero/false.\n    var innerHTML = this.props.dangerouslySetInnerHTML;\n    if (innerHTML != null) {\n      if (innerHTML.__html != null) {\n        return innerHTML.__html;\n      }\n    } else {\n      var contentToUse =\n        CONTENT_TYPES[typeof this.props.children] ? this.props.children : null;\n      var childrenToUse = contentToUse != null ? null : this.props.children;\n      if (contentToUse != null) {\n        return escapeTextForBrowser(contentToUse);\n      } else if (childrenToUse != null) {\n        var mountImages = this.mountChildren(\n          childrenToUse,\n          transaction\n        );\n        return mountImages.join('');\n      }\n    }\n    return '';\n  },\n\n  receiveComponent: function(nextComponent, transaction) {\n    assertValidProps(nextComponent.props);\n    ReactComponent.Mixin.receiveComponent.call(\n      this,\n      nextComponent,\n      transaction\n    );\n  },\n\n  /**\n   * Updates a native DOM component after it has already been allocated and\n   * attached to the DOM. Reconciles the root DOM node, then recurses.\n   *\n   * @param {ReactReconcileTransaction} transaction\n   * @param {object} prevProps\n   * @internal\n   * @overridable\n   */\n  updateComponent: ReactPerf.measure(\n    'ReactDOMComponent',\n    'updateComponent',\n    function(transaction, prevProps) {\n      ReactComponent.Mixin.updateComponent.call(this, transaction, prevProps);\n      this._updateDOMProperties(prevProps);\n      this._updateDOMChildren(prevProps, transaction);\n    }\n  ),\n\n  /**\n   * Reconciles the properties by detecting differences in property values and\n   * updating the DOM as necessary. This function is probably the single most\n   * critical path for performance optimization.\n   *\n   * TODO: Benchmark whether checking for changed values in memory actually\n   *       improves performance (especially statically positioned elements).\n   * TODO: Benchmark the effects of putting this at the top since 99% of props\n   *       do not change for a given reconciliation.\n   * TODO: Benchmark areas that can be improved with caching.\n   *\n   * @private\n   * @param {object} lastProps\n   */\n  _updateDOMProperties: function(lastProps) {\n    var nextProps = this.props;\n    var propKey;\n    var styleName;\n    var styleUpdates;\n    for (propKey in lastProps) {\n      if (nextProps.hasOwnProperty(propKey) ||\n         !lastProps.hasOwnProperty(propKey)) {\n        continue;\n      }\n      if (propKey === STYLE) {\n        var lastStyle = lastProps[propKey];\n        for (styleName in lastStyle) {\n          if (lastStyle.hasOwnProperty(styleName)) {\n            styleUpdates = styleUpdates || {};\n            styleUpdates[styleName] = '';\n          }\n        }\n      } else if (registrationNames[propKey]) {\n        deleteListener(this._rootNodeID, propKey);\n      } else if (\n          DOMProperty.isStandardName[propKey] ||\n          DOMProperty.isCustomAttribute(propKey)) {\n        ReactComponent.DOMIDOperations.deletePropertyByID(\n          this._rootNodeID,\n          propKey\n        );\n      }\n    }\n    for (propKey in nextProps) {\n      var nextProp = nextProps[propKey];\n      var lastProp = lastProps[propKey];\n      if (!nextProps.hasOwnProperty(propKey) || nextProp === lastProp) {\n        continue;\n      }\n      if (propKey === STYLE) {\n        if (nextProp) {\n          nextProp = nextProps.style = merge(nextProp);\n        }\n        if (lastProp) {\n          // Unset styles on `lastProp` but not on `nextProp`.\n          for (styleName in lastProp) {\n            if (lastProp.hasOwnProperty(styleName) &&\n                !nextProp.hasOwnProperty(styleName)) {\n              styleUpdates = styleUpdates || {};\n              styleUpdates[styleName] = '';\n            }\n          }\n          // Update styles that changed since `lastProp`.\n          for (styleName in nextProp) {\n            if (nextProp.hasOwnProperty(styleName) &&\n                lastProp[styleName] !== nextProp[styleName]) {\n              styleUpdates = styleUpdates || {};\n              styleUpdates[styleName] = nextProp[styleName];\n            }\n          }\n        } else {\n          // Relies on `updateStylesByID` not mutating `styleUpdates`.\n          styleUpdates = nextProp;\n        }\n      } else if (registrationNames[propKey]) {\n        putListener(this._rootNodeID, propKey, nextProp);\n      } else if (\n          DOMProperty.isStandardName[propKey] ||\n          DOMProperty.isCustomAttribute(propKey)) {\n        ReactComponent.DOMIDOperations.updatePropertyByID(\n          this._rootNodeID,\n          propKey,\n          nextProp\n        );\n      }\n    }\n    if (styleUpdates) {\n      ReactComponent.DOMIDOperations.updateStylesByID(\n        this._rootNodeID,\n        styleUpdates\n      );\n    }\n  },\n\n  /**\n   * Reconciles the children with the various properties that affect the\n   * children content.\n   *\n   * @param {object} lastProps\n   * @param {ReactReconcileTransaction} transaction\n   */\n  _updateDOMChildren: function(lastProps, transaction) {\n    var nextProps = this.props;\n\n    var lastContent =\n      CONTENT_TYPES[typeof lastProps.children] ? lastProps.children : null;\n    var nextContent =\n      CONTENT_TYPES[typeof nextProps.children] ? nextProps.children : null;\n\n    var lastHtml =\n      lastProps.dangerouslySetInnerHTML &&\n      lastProps.dangerouslySetInnerHTML.__html;\n    var nextHtml =\n      nextProps.dangerouslySetInnerHTML &&\n      nextProps.dangerouslySetInnerHTML.__html;\n\n    // Note the use of `!=` which checks for null or undefined.\n    var lastChildren = lastContent != null ? null : lastProps.children;\n    var nextChildren = nextContent != null ? null : nextProps.children;\n\n    // If we're switching from children to content/html or vice versa, remove\n    // the old content\n    var lastHasContentOrHtml = lastContent != null || lastHtml != null;\n    var nextHasContentOrHtml = nextContent != null || nextHtml != null;\n    if (lastChildren != null && nextChildren == null) {\n      this.updateChildren(null, transaction);\n    } else if (lastHasContentOrHtml && !nextHasContentOrHtml) {\n      this.updateTextContent('');\n    }\n\n    if (nextContent != null) {\n      if (lastContent !== nextContent) {\n        this.updateTextContent('' + nextContent);\n      }\n    } else if (nextHtml != null) {\n      if (lastHtml !== nextHtml) {\n        ReactComponent.DOMIDOperations.updateInnerHTMLByID(\n          this._rootNodeID,\n          nextHtml\n        );\n      }\n    } else if (nextChildren != null) {\n      this.updateChildren(nextChildren, transaction);\n    }\n  },\n\n  /**\n   * Destroys all event registrations for this instance. Does not remove from\n   * the DOM. That must be done by the parent.\n   *\n   * @internal\n   */\n  unmountComponent: function() {\n    ReactEventEmitter.deleteAllListeners(this._rootNodeID);\n    ReactComponent.Mixin.unmountComponent.call(this);\n    this.unmountChildren();\n  }\n\n};\n\nmixInto(ReactDOMComponent, ReactComponent.Mixin);\nmixInto(ReactDOMComponent, ReactDOMComponent.Mixin);\nmixInto(ReactDOMComponent, ReactMultiChild.Mixin);\n\nmodule.exports = ReactDOMComponent;\n"]},"metadata":{},"sourceType":"script"}